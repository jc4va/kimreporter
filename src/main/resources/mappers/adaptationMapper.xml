<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.kimreporter.mapper.AdaptationMapper">

<insert id="create">
	insert ignore into TBL_ADAPTATION (article_title, article_content, adaptation_id, adaptation_content, ranking)
	values(#{article_title}, #{article_content}, #{adaptation_id}, #{article_content}, #{ranking})
</insert>

<select id="read" resultType="com.kimreporter.domain.AdaptationVO">
	select adaptation_id, user_id, adaptation_content, article_title, article_content
	from TBL_ADAPTATION
	where adaptation_id=#{adaptation_id}
</select>

<update id="update">
	update TBL_ADAPTATION set adaptation_content=#{adaptation_content}
	where adaptation_id=#{adaptation_id}
</update>

<delete id="delete">
	delete from TBL_ADAPTATION where adaptation_id = #{adaptation_id}
</delete>

<select id="listAll" resultType="com.kimreporter.domain.AdaptationVO">
	<![CDATA[
	select adaptation_id, user_id, adaptation_content, article_title, article_content, ranking, inserted_time
	from TBL_ADAPTATION
	where ranking > 0 AND DATE(inserted_time) = DATE(CURRENT_TIMESTAMP)
	order by ranking asc
	LIMIT 20
	]]>
</select>

<update id="updateRanking">
	update TBL_ADAPTATION set ranking=#{ranking}
	where adaptation_id=#{adaptation_id}
</update>

</mapper>